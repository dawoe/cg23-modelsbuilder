<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>ModelsBuilder : Beyond PureLive - Codegarden 23</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/dotcontrol.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-transition="convex">
          <h1>ModelsBuilder</h1>
          <h2>Beyond PureLive</h2>
        </section>
        <section>
          <h2>Introduction</h2>
          <ul>
            <li>Dave Woestenborghs</li>
            <li>Work at <a href="https://dotcontrol.com/">DotControl</a></li>
            <li>Umbraco MVP (8x)</li>
            <li>Active community member since 2008</li>
            <li>Part of the 24 days in Umbraco team</li>
            <li>Honorary member of Umbraco Packages Community team.</li>
          </ul>
          <aside class="notes">
            Data drive agency with offices in r'dam, heerlen and curacoa<br />
            MVP since 2016<br />
            First blog written in 2008
          </aside>
        </section>
        <section data-transition="convex">
          <h1>History</h1>
        </section>
        <section>
          <p>First released as a open source package called <a href="https://our.umbraco.com/packages/developer-tools/zbumodelsbuilder/" target="_blank">Zbu.Modelsbuilder</a> in 2014 by  
            former HQ employee <a href="https://www.zpqrtbnk.net/" target="_blank">Stephan Gay</a>.
          </p>
        </section>       
        <section>
          <p>In 2016 this was rebranded to Umbraco.Modelsbuilder and shipped with Umbraco 7.4.</p><p></p> But it was still a open source package maintained seperatly from Umbraco CMS.</a>
          </p>
        </section>  
        <section>
          <p>In 2020 a slimmed down version was embedded in to Umbraco 8.5</a>
          </p>
        </section>
        <section>
          <h1>How does it work</h1>
        </section>     
        <section>
          <p>
            Models builder generates a <u>partial</u> C# class for each document type in your CMS with a filename : <br> DocTypeAlias.generated.cs
          </p>
        </section>
        <section>
          <p>
            The generated class will inherit from PublishedContentModel or PublishedElementModel depending on the document type configuration.          
          </p>          
        </section>
        <section>
          <p>Each property on your doctype will be a property in the generated C# class with the correct CLR type returned by the property value converter</p>
        </section>
        <section>
          <pre >
            <code data-trim data-noescape class="language-csharp medium">
              [PublishedModel("blog")] 
              public partial class Blog : PublishedContentModel
              {         
                public new const string ModelTypeAlias = "feature";       

                [global::System.Diagnostics.CodeAnalysis.MaybeNull]
                [ImplementPropertyType("howManyPostsShouldBeShown")]
                public virtual decimal HowManyPostsShouldBeShown 
                  => this.Value<decimal>(_publishedValueFallback, "howManyPostsShouldBeShown");
              }
            </code>
          </pre>
        </section>       
        <section>
          <p>Document types that inherits from another doctype will use C# inheritance.</p>
        </section>
        <section>
          <pre>
            <code data-trim data-noescape class="language-csharp large">
              [PublishedModel("news")]
              public partial class News : Blog
              {                
              }
            </code>
          </pre>
        </section>
        <section>
          <p>Document types that are used as a composition in another document type will have a interface generated besides a concrete class implementing the generated interface.           
          </p>
        </section>
        <section>
          <p>Each document type that uses the composition will implement the interface.            
          </p>
        </section>
        <section>
          <p>For each property on the composition document type a static "Get" method will be implemented, which will be used in composed document types.
          </p>
        </section>
        <section>
          <pre>
            <code data-trim data-noescape class="language-csharp large">
              public partial interface IContentBase : IPublishedContent
              {
                [global::System.Diagnostics.CodeAnalysis.MaybeNull]
                BlockGridModel BodyText { get; }                
              }
            </code>
          </pre>
        </section>
        <section>
          <pre>
            <code data-trim data-noescape class="language-csharp medium">
              [PublishedModel("contentBase")]
              public partial class ContentBase : PublishedContentModel, IContentBase
              {
                [global::System.Diagnostics.CodeAnalysis.MaybeNull]
                [ImplementPropertyType("bodyText")]
                public virtual BlockGridModel BodyText => GetBodyText(this, _publishedValueFallback);

                [return: global::System.Diagnostics.CodeAnalysis.MaybeNull]
                public static BlockGridModel GetBodyText(IContentBase that, 
                  IPublishedValueFallback publishedValueFallback) 
                  => that.Value<BlockGridModel>(publishedValueFallback, "bodyText");                
              }
            </code>
          </pre>
        </section>
        <section>
          <pre>
            <code data-trim data-noescape class="language-csharp medium">
              [PublishedModel("contentPage")]
              public partial class ContentPage : PublishedContentModel, IContentBase, INavigationBase
              {
                [global::System.Diagnostics.CodeAnalysis.MaybeNull]
                [ImplementPropertyType("bodyText")]
                public virtual BlockGridModel BodyText
                  => ContentBase.GetBodyText(this, _publishedValueFallback);                          
              }
            </code>
          </pre>
        </section>
      </div>
    </div>

    <div id="dc-logo">
      <a href="https://dotcontrol.com/">
        <img src="img/dotcontrol-colored.svg" />
      </a>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/zoom/zoom.js"></script>   
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom],

        totalTime: 1800,

        width: 1200,
        height: 700,       
      });
      
    </script>   

    <style type="text/css">
      .reveal pre {
        width: 100%;
      }
    </style>
  </body>
</html>
